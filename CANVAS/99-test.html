<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
<textarea id="msg" rows="40" cols="100"></textarea>
<script type="module">
function dump(s) {msg.value += s + '\n'}



let maps = `



<gamemap timestep="100" name="LEVEL 1: EAT MY LAVA!">
THIS IS ROW 1 OF THE LEVEL SPEC
THIS IS ROW 2 OF THE LEVEL SPEC
THIS IS ROW 3 OF THE LEVEL SPEC
THIS IS ROW 4 OF THE LEVEL SPEC
</gamemap>

@@@@@@@@@@@@@@@@@@@@@

<gamemap name="THIS IS LEVEL TWO" timestep="10">
THIS IS ROW 1 OF THE LEVEL SPEC
THIS IS ROW 2 OF THE LEVEL SPEC
THIS IS ROW 3 OF THE LEVEL SPEC
THIS IS ROW 4 OF THE LEVEL SPEC
</gamemap>`

maps=`
<gamemap> <timestep>100</timestep> <<<name>>>
T O A D   &nbsp;&nbsp;&nbsp;    B U R N<br>By Yen Lee Loh &amp; Isaac Hutchison (2025)
</name>




uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu
uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu
uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu
u                                     u
u ### ### ###   #    #   # #          u
u  #  # # # # ###    ### # # ### ###  u
u  #  # # ### # #    # # # # #   # #  u
u  #  ### # # ###    ### ### #   # #  u
u ++++++++++++++++++++++++++++++++++  u
u  ### ### ### ### ### ### ### ###    u
u  # # # # # # # # # # # # # # # #    u
u  # ### ### ### ### ### ### ### ##F  u
u G#                                  u
u                                     u
uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu
</gamemap>
`


maps = [...maps.matchAll(  /<gamemap>.*<\/gamemap>/gs )]

for (let i=0; i<maps.length; ++i) {
  const map = maps[i]

  // dump('\n maps[' + i + '] = ' + '\n' + map)

  const timestep = /<timestep>(.*)<\/timestep>/gs . exec(map) [1]
  dump('\n timestep = ' + timestep)

  let name = /<<<name>>>(.*)<\/name>/gs . exec(map)
  if (name) name=name[1]
  dump('\n name = ' + name)

  let content = 
    /<gamemap>(.*)<\/gamemap>/gs . exec(map) [1]
    .replace(  /[\s]*<timestep>.*<\/timestep>[\s]*/gs , '')
    .replace(  /[\s]*<<<name>>>.*<\/name>[\s]*/gs , '')
  dump('\n content = ')
  dump (content)

  const rows = content.split('\n').filter(i=>i) 
  
  for (const row of rows) {
    dump ('ROW: ' + row + ']')
  }
}





// for (const elem of maps.matchAll(  /<level.*?>.*?<\/level>/gs ))   {
//   dump(elem)
// }


// maps = [...maps.matchAll(  /<gamemap.*?>.*?<\/gamemap>/gs )]

// for (let i=0; i<maps.length; ++i) {
//   const map = maps[i]

//   dump('\n maps[' + i + '] = ' + '\n' + map)

//   const name = /(?:gamemap).*name="(.*?)"/gs . exec(map) [1]
//   dump('\n name = ' + name)

//   const timestep = /(?:gamemap).*timestep="(.*?)"/gs . exec(map) [1]
//   dump('\n timestep = ' + timestep)

//   const content = /<gamemap.*?>(.*)<\/gamemap>/gs . exec(map) [1]
//   dump('\n content = ')
//   dump (content)

//   const rows = content.split('\n').filter(i=>i) 
  
//   for (const row of rows) {
//     dump ('ROW: ' + row)
//   }
// }





</script>
</body>
</html>